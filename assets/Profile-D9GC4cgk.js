import{_,u as k,r as m,a as h,i as x,b as e,o,e as t,f,t as d,g as r,v,w as N}from"./index-BgBYIPit.js";import{a as I}from"./index-B9ygI19o.js";const C={class:"profile-container"},S={class:"profile-content"},V={class:"info-card"},j={class:"card-header"},U={class:"info-body"},w={class:"avatar-section"},M={class:"avatar-placeholder"},$={key:0,class:"change-avatar-btn"},B={class:"form-grid"},O={class:"form-group"},P={key:1,class:"static-val"},T={class:"form-group"},D={key:1,class:"static-val"},E={class:"form-group"},J={key:1,class:"static-val"},L={class:"form-group"},F={key:1,class:"static-val"},R={class:"form-group"},q={class:"static-val"},z={class:"form-group"},A={key:1,class:"static-val"},G={key:0,class:"card-footer"},H=["disabled"],K={class:"info-card account-card"},Q={class:"account-actions"},W={class:"logout-modal"},X={class:"logout-modal-actions"},Y={__name:"Profile",setup(Z){const b=k(),a=m({}),i=m(!1),c=m(!1),p=m(!1),n=h({name:"",school:"",subject:"",classNum:"",phone:""});x(()=>{const u=JSON.parse(localStorage.getItem("user")||"{}");a.value={name:"æè€å¸ˆ",teacherId:"T2023001",subject:"ä½“è‚²",school:"é˜³å…‰å°å­¦",classNum:"ä¸‰å¹´çº§äºŒç­",phone:"13800138000",...u},Object.assign(n,a.value)});const y=async()=>{c.value=!0;try{const u=await I.post("/api/teacher/update",n);u.data.code===200&&(a.value={...a.value,...u.data.data},localStorage.setItem("user",JSON.stringify(a.value)),i.value=!1,alert("ä¿å­˜æˆåŠŸï¼"))}catch(u){console.error(u),alert("ä¿å­˜å¤±è´¥")}finally{c.value=!1}},g=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),b.push("/login")};return(u,s)=>(o(),e("div",C,[s[20]||(s[20]=t("header",{class:"section-header"},[t("h2",null,"ä¸ªäººä¸­å¿ƒ ğŸ‘¤"),t("p",null,"ç®¡ç†ä¸ªäººèµ„æ–™ä¸ç­çº§ä¿¡æ¯")],-1)),t("div",S,[t("div",V,[t("div",j,[s[9]||(s[9]=t("h3",null,"æ•™å¸ˆä¿¡æ¯",-1)),t("button",{class:"edit-btn",onClick:s[0]||(s[0]=l=>i.value=!i.value)},d(i.value?"å–æ¶ˆç¼–è¾‘":"ç¼–è¾‘èµ„æ–™"),1)]),t("div",U,[t("div",w,[t("div",M,d(a.value.name?.[0]||"æ•™"),1),i.value?(o(),e("button",$,"æ›´æ¢å¤´åƒ")):f("",!0)]),t("div",B,[t("div",O,[s[10]||(s[10]=t("label",null,"æ•™å¸ˆå§“å",-1)),i.value?r((o(),e("input",{key:0,"onUpdate:modelValue":s[1]||(s[1]=l=>n.name=l),type:"text",placeholder:"è¯·è¾“å…¥å§“å"},null,512)),[[v,n.name]]):(o(),e("div",P,d(a.value.name),1))]),t("div",T,[s[11]||(s[11]=t("label",null,"æ‰€å±å­¦æ ¡",-1)),i.value?r((o(),e("input",{key:0,"onUpdate:modelValue":s[2]||(s[2]=l=>n.school=l),type:"text",placeholder:"ä¾‹å¦‚ï¼šé˜³å…‰å°å­¦"},null,512)),[[v,n.school]]):(o(),e("div",D,d(a.value.school||"æœªè®¾ç½®"),1))]),t("div",E,[s[12]||(s[12]=t("label",null,"ä»»æ•™ç§‘ç›®",-1)),i.value?r((o(),e("input",{key:0,"onUpdate:modelValue":s[3]||(s[3]=l=>n.subject=l),type:"text",placeholder:"ä¾‹å¦‚ï¼šä½“è‚²"},null,512)),[[v,n.subject]]):(o(),e("div",J,d(a.value.subject||"æœªè®¾ç½®"),1))]),t("div",L,[s[13]||(s[13]=t("label",null,"è´Ÿè´£ç­çº§",-1)),i.value?r((o(),e("input",{key:0,"onUpdate:modelValue":s[4]||(s[4]=l=>n.classNum=l),type:"text",placeholder:"ä¾‹å¦‚ï¼šä¸‰å¹´çº§äºŒç­"},null,512)),[[v,n.classNum]]):(o(),e("div",F,d(a.value.classNum||"æœªè®¾ç½®"),1))]),t("div",R,[s[14]||(s[14]=t("label",null,"å·¥å·",-1)),t("div",q,d(a.value.teacherId||"T2023001"),1)]),t("div",z,[s[15]||(s[15]=t("label",null,"è”ç³»ç”µè¯",-1)),i.value?r((o(),e("input",{key:0,"onUpdate:modelValue":s[5]||(s[5]=l=>n.phone=l),type:"text",placeholder:"è¯·è¾“å…¥æ‰‹æœºå·"},null,512)),[[v,n.phone]]):(o(),e("div",A,d(a.value.phone||"æœªè®¾ç½®"),1))])])]),i.value?(o(),e("div",G,[t("button",{class:"save-btn",onClick:y,disabled:c.value},d(c.value?"ä¿å­˜ä¸­...":"ä¿å­˜ä¿®æ”¹"),9,H)])):f("",!0)]),t("div",K,[s[17]||(s[17]=t("div",{class:"card-header"},[t("h3",null,"è´¦å·ç®¡ç†")],-1)),t("div",Q,[s[16]||(s[16]=t("button",{class:"action-btn outline",type:"button"},"ä¿®æ”¹ç™»å½•å¯†ç ",-1)),t("button",{class:"action-btn danger",type:"button",onClick:s[6]||(s[6]=l=>p.value=!0)},"é€€å‡ºç™»å½•")])])]),p.value?(o(),e("div",{key:0,class:"logout-modal-overlay",onClick:s[8]||(s[8]=N(l=>p.value=!1,["self"]))},[t("div",W,[s[18]||(s[18]=t("h3",null,"ç¡®è®¤é€€å‡º",-1)),s[19]||(s[19]=t("p",null,"ä½ ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ",-1)),t("div",X,[t("button",{class:"modal-btn cancel",onClick:s[7]||(s[7]=l=>p.value=!1)},"å–æ¶ˆ"),t("button",{class:"modal-btn confirm",onClick:g},"ç¡®è®¤é€€å‡º")])])])):f("",!0)]))}},es=_(Y,[["__scopeId","data-v-453eca4d"]]);export{es as default};
