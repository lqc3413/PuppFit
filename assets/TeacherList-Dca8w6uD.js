import{_ as V,r as i,c as I,i as M,b as d,o as u,e as t,f as h,t as o,x as T,g as r,v,F as L,k as U,n as N,w,z as $}from"./index-jU6pvMoE.js";import{a as m}from"./index-B9ygI19o.js";const B={class:"page-container"},F={class:"page-header"},S={class:"header-left"},q={class:"count-badge"},z={class:"search-bar"},A={class:"table-wrapper"},D={class:"data-table"},E={class:"name-cell"},K={class:"action-cell"},P=["onClick"],j=["onClick"],G={key:0},H={class:"modal-box"},J={class:"modal-title"},O={class:"form-group"},Q={class:"form-group"},R={class:"form-group"},W={class:"form-group"},X={class:"modal-actions"},Y={type:"submit",class:"submit-btn"},Z={__name:"TeacherList",setup(tt){const p=i([]),c=i(""),f=i(!1),n=i(!1),a=i({name:"",employeeId:"",phone:"",status:"active"}),b=I(()=>{if(!c.value)return p.value;const l=c.value.toLowerCase();return p.value.filter(e=>e.name.toLowerCase().includes(l)||e.employeeId.toLowerCase().includes(l))}),_=async()=>{try{const l=await m.get("/api/admin/teachers");l.data.code===200&&(p.value=l.data.data)}catch(l){console.error(l)}},g=l=>{a.value={...l},n.value=!0},k=async l=>{if(confirm(`确定要重置 ${l.name} 的密码吗？`))try{const e=await m.post("/api/admin/teacher/reset-password",{id:l.id});alert(e.data.message)}catch{alert("操作失败")}},x=async()=>{try{n.value?await m.post("/api/admin/teacher/update",a.value):await m.post("/api/admin/teacher/add",a.value),y(),_()}catch{alert("操作失败")}},y=()=>{f.value=!1,n.value=!1,a.value={name:"",employeeId:"",phone:"",status:"active"}};return M(_),(l,e)=>(u(),d("div",B,[t("div",F,[t("div",S,[e[6]||(e[6]=t("h2",{class:"page-title"},"教师列表",-1)),t("span",q,"共 "+o(p.value.length)+" 人",1)]),t("button",{class:"primary-btn",onClick:e[0]||(e[0]=s=>f.value=!0)},[...e[7]||(e[7]=[t("span",null,"➕",-1),T(" 新增教师 ",-1)])])]),t("div",z,[r(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>c.value=s),type:"text",placeholder:"搜索姓名、工号...",class:"search-input"},null,512),[[v,c.value]])]),t("div",A,[t("table",D,[e[9]||(e[9]=t("thead",null,[t("tr",null,[t("th",null,"姓名"),t("th",null,"工号"),t("th",null,"联系电话"),t("th",null,"执教班级"),t("th",null,"状态"),t("th",null,"入职时间"),t("th",null,"操作")])],-1)),t("tbody",null,[(u(!0),d(L,null,U(b.value,s=>(u(),d("tr",{key:s.id},[t("td",E,o(s.name),1),t("td",null,o(s.employeeId),1),t("td",null,o(s.phone),1),t("td",null,o(s.classNames||"-"),1),t("td",null,[t("span",{class:N(["status-tag",s.status])},o(s.status==="active"?"在职":"离职"),3)]),t("td",null,o(s.createdAt),1),t("td",K,[t("button",{class:"action-link",onClick:C=>g(s)},"编辑",8,P),t("button",{class:"action-link warn",onClick:C=>k(s)},"重置密码",8,j)])]))),128)),b.value.length===0?(u(),d("tr",G,[...e[8]||(e[8]=[t("td",{colspan:"7",class:"empty-row"},"暂无数据",-1)])])):h("",!0)])])]),f.value||n.value?(u(),d("div",{key:0,class:"modal-overlay",onClick:w(y,["self"])},[t("div",H,[t("h3",J,o(n.value?"编辑教师":"新增教师"),1),t("form",{onSubmit:w(x,["prevent"])},[t("div",O,[e[10]||(e[10]=t("label",null,"姓名 *",-1)),r(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.name=s),type:"text",required:""},null,512),[[v,a.value.name]])]),t("div",Q,[e[11]||(e[11]=t("label",null,"工号 *",-1)),r(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>a.value.employeeId=s),type:"text",required:""},null,512),[[v,a.value.employeeId]])]),t("div",R,[e[12]||(e[12]=t("label",null,"联系电话",-1)),r(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>a.value.phone=s),type:"text"},null,512),[[v,a.value.phone]])]),t("div",W,[e[14]||(e[14]=t("label",null,"状态",-1)),r(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>a.value.status=s)},[...e[13]||(e[13]=[t("option",{value:"active"},"在职",-1),t("option",{value:"inactive"},"离职",-1)])],512),[[$,a.value.status]])]),t("div",X,[t("button",{type:"button",class:"cancel-btn",onClick:y},"取消"),t("button",Y,o(n.value?"保存":"添加"),1)])],32)])])):h("",!0)]))}},lt=V(Z,[["__scopeId","data-v-01fc2d82"]]);export{lt as default};
